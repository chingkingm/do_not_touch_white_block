<!--
 * @Author: chingkingm
 * @Date: 2020-06-22 15:06:23
 * @LastEditTime: 2020-06-24 15:18:08
 * @FilePath: \多媒体教育与娱乐\大作业\code_file\README.md
 * @Description: 
--> 
# do_not_touch_white_block
## 别踩白块
<del>"BLACK LIVES MATTER" 

使用JavaScript实现的简易别踩白块，具有基本的游戏功能，可以记录分数。 

游戏的基本功能由HTML的**画布API**实现。整个界面分为三个部分，分别为：成绩区、游戏区、功能区。
1. 成绩区由两个sapn组成，分别显示当前成绩与最高成绩。当前成绩有js函数计算得出，实时更新；最高成绩由HTML存储API实现，使用localStorage存储在本地，网页成功加载后读取并显示出来，并且能够根据当前成绩的变化进行更新。
2. 游戏区包含一个canvas，width=360px,height=720px，结合JavaScript实现游戏画面的动态变化。我们使用 *lineTo()* 绘制出线段组合成数个方块，对需要展现为黑色的方块使用 *fillRect()* 填充颜色。当画面移动时，页面上最多会显示4行方块，由于画布大小固定，所以容易判断出由上至下第2，3行高度固定为240px，第1,4行高度之和固定为240px，那么使用参数t代表第一行的高度，其余各行由t表示，令t在(0,240)之间变动就可以实现画面的滚动。游戏的目标是点击黑色方块，所以需要对鼠标点击的坐标位置进行判断，我们使用 *clientX(),clientY(),offsetLeft(),offsetTop()* 等方法实现坐标的获取，结合页面布局判断出点击的方块序号，进而判断其是否为黑色方块。被点击的黑色方块应该变为白色，而未被点击的应保持黑色，同时因为画面下移产生的新一行也需要显示一个黑色方块，我们设计了函数 *random_block()* 来实现，将黑色次序以及颜色分别以队列的形式存储在数组 *n*，*block_color* 中，每当页面要产生新的一行时调用函数*random_block()* ，旧内容出队列，新内容入队列，可以实现队列的更新。游戏的失败分为两种情况，触底和点击白块，当t递增到240转变为0时，如果颜色队列的头部依旧是黑色，那么就说明黑色方块触底了，而点击白块更加容易判定，它是点击黑块的对立面，在之前的判断语句中加入else即可。游戏结束时要有醒目的提醒，所以我设计了专门的提醒界面，一个包裹着刚刚结束游戏成绩的div会在结束时显示在画面的中间，如果再该局游戏中获得了新的记录，也会在成绩后显示标红的<font color = 'red'>New</font>来表示。同时也移除了canvas的点击事件来确保不会出现结束后依旧运行的bug。
3. 功能区包括一个重新开始的按钮，在游戏中或者游戏结束后都是可以点击的，触发后，会重新初始化游戏界面，并将当前成绩归零，游戏速度复原，相当于刷新了页面。

- preload():在网页打开时预加载游戏内容和封面。
- check_start():判断点击位置是否为"开始"。
- startGame():开始游戏。
- higherspeed():调整游戏速度，每15000ms触发一次。
- showclick():绑定在canvas元素上的点击事件，获取鼠标点击位置。
- cal_no():根据鼠标点击位置的坐标计算其属于哪一行、哪一列。
- cal_score():计算分数，包括储存和显示。
- game():主函数，游戏画面间隔一定时间下移speed个像素，依次画出横线，竖线，黑色方块。
- check_fail():判断黑色方块是否触底。
- check_click():判断点击位置是否为最底部的黑块，若是则更改其为白色，否则游戏结束。
- draw_vertical():画竖线。
- draw_horizontal():画横线。
- draw_block():画方块。
- random_block():生成随机数，决定同一行哪一块是黑色，同时进行颜色的更替，即舍弃底部画面外的颜色，新增顶部新出现的颜色。
- fail():失败处理函数，清空定时器，停止背景音乐，移除绑定在canvas元素上的点击事件，显示失败窗口。
- restart():重新开始。